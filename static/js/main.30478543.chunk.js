(this.webpackJsonpreact=this.webpackJsonpreact||[]).push([[0],{20:function(e,t,c){},25:function(e,t,c){"use strict";c.r(t);var a=c(1),r=c(15),n=c.n(r),s=c(10),i=(c(20),c(7));c(21),c(22);i.a.apps.length?i.a.app():i.a.initializeApp({apiKey:"AIzaSyAtTE-mvvdKFsdWPXSNrQ7Gvf2UJsYEQ0k",authDomain:"instafiregram-2cd32.firebaseapp.com",projectId:"instafiregram-2cd32",storageBucket:"instafiregram-2cd32.appspot.com",messagingSenderId:"682670094145",appId:"1:682670094145:web:d38838b3463d286c9ed3c0"});i.a.storage();var l=i.a.firestore(),o=i.a.firestore.FieldValue.serverTimestamp,u=function(e){var t=Object(a.useState)(0),c=Object(s.a)(t,2),r=c[0],n=c[1],u=Object(a.useState)(""),j=Object(s.a)(u,2),d=j[0],b=j[1],f=Object(a.useState)(" "),m=Object(s.a)(f,2),p=m[0],g=m[1];return Object(a.useEffect)((function(){var t=i.a.storage().ref(),c=l.collection("image"),a=t.child("images/"+e.name).put(e);a.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;n(t)}),(function(e){b(e)})),a.then((function(e){e.ref.getDownloadURL().then((function(e){var t=o();c.add({url:e,createdAt:t}),g(e)}))}))}),[e]),{progress:r,error:d,url:p}},j=c(3),d=function(e){var t=e.file,c=e.setFile,r=u(t),n=r.progress,s=r.url;return Object(a.useEffect)((function(){return function(){c(null)}}),[s,c]),Object(j.jsx)("div",{className:"progress-bar",style:{width:n+"%"}})},b=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),c=t[0],r=t[1],n=["image/png","image/jpeg"],i=Object(a.useState)(null),l=Object(s.a)(i,2),o=l[0],u=l[1];return Object(j.jsxs)("form",{className:"input-form",children:[Object(j.jsxs)("label",{className:"label-form",children:[Object(j.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&n.includes(t.type)?(r(t),u(" ")):(r(null),u("Please choose the image(png or jpeg)"))}}),Object(j.jsx)("span",{children:"+"})]}),Object(j.jsxs)("div",{className:"output",children:[o&&Object(j.jsx)("div",{className:"error",children:o}),c&&Object(j.jsx)("div",{children:c.name}),c&&Object(j.jsx)(d,{file:c,setFile:r})]})]})},f=c(13),m=function(e){var t=Object(a.useState)([]),c=Object(s.a)(t,2),r=c[0],n=c[1];return Object(a.useEffect)((function(){var t=l.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(f.a)(Object(f.a)({},e.data()),{},{id:e.id}))})),n(t)}),(function(e){console.log(e)}));return function(){return t()}}),[e]),{docs:r}},p=c(28),g=function(e){var t=e.selectImage,c=m("image").docs;return Object(j.jsx)("div",{className:"img-grid",children:c.map((function(e){return Object(j.jsx)(p.a.div,{className:"img-wrap",onClick:function(){return t(e.url)},layout:!0,whileHover:{opacity:1},children:Object(j.jsx)("img",{src:e.url,alt:"images"})},e.id)}))})},O=function(e){var t=e.selectImage,c=e.setSelectImage;return Object(j.jsx)("div",{className:"backdrop",onClick:function(e){c(null)},children:Object(j.jsx)("img",{src:t,alt:"enlarged-pic"})})};function h(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),c=t[0],r=t[1];return Object(j.jsxs)("div",{className:"app",children:[Object(j.jsx)("h1",{children:"Your Gallery"}),Object(j.jsx)(b,{}),Object(j.jsx)(g,{selectImage:r}),c&&Object(j.jsx)(O,{selectImage:c,setSelectImage:r})]})}var v=document.getElementById("root");n.a.render(Object(j.jsx)(a.StrictMode,{children:Object(j.jsx)(h,{})}),v)}},[[25,1,2]]]);
//# sourceMappingURL=main.30478543.chunk.js.map